<!doctype HTML>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <link rel="stylesheet" href="styles.css">
        <link rel="shortcut icon" href="#" />
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    </head>


    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>

    
    <script src="https://raw.githack.com/fcor/arjs-gestures/master/dist/gestures.js"></script>
    

    <script>
       /*const urlParams = new URLSearchParams(window.location.search);
        const img = urlParams.get('img');

        document.addEventListener("DOMContentLoaded", function(event) { 
            
            const m3D = document.getElementById("2dImage");
            m3D.removeAttribute("src");
            switch(img){
                case '1':
                    m3D.setAttribute('src',"./asset/2d/SanPioV.png");
                    break;
                case '2':
                    m3D.setAttribute('src',"./asset/3d/ship.glb");
                    break;
                case '3':
                    m3D.setAttribute('src',"./asset/3d/vase.glb");
                    break;
            }
            
        });*/
    </script>

    <body>
        <h1 class="white">Muovi lentamente il telefono</h1>

        <a-scene embedded  loading-screen="enabled: false;" arjs="sourceType: webcam; debugUIEnabled: false;" vr-mode-ui="enabled: false">
        <!--<a-scene embedded arjs='sourceType: webcam; videoTexture: true; debugUIEnabled: false;'
            vr-mode-ui="enabled: false"  gesture-detector id="scene">

            PARAMETRI TELEFONO 
                <a-scene embedded arjs='sourceType: webcam; patternRatio: 0.75 trackingMethod: best maxDetectionRate: 60 detectionMode: mono' renderer='antialias: true; alpha: true; precision: medium;' vr-mode-ui="enabled: false" stats>
                <a-marker vidhandler preset="custom" type='pattern' url='...' smoothCount=0 smoothTolerance=0.0001>
        -->

        <!--<a-image src="./asset/2d/SanPioV.png" scale="1 5.2 1" rotation="-20 100 -20" position="0 0 -1" look-at="[gps-camera]" 
            gesture-handler class="clickable"
            gps-entity-place="latitude: 44.141820; longitude: 12.244194; " id="2dImage"/></a-image>
        
        
        <a-sound src="src: url(/asset/2d/sound.mp3)" position="0 2 5"></a-sound>
        <a-entity id="river" geometry="primitive: plane" material="color: blue" look-at="[gps-camera]" gesture-handler class="clickable" 
            gps-entity-place="latitude: 44.13872998373266; longitude: 12.244238611211696; " 
          position="0 0 -1" sound="src: url(./asset/2d/sound.mp3); autoplay: true"></a-entity>
        -->
        
        <a-assets>
            <audio id="river" src="./asset/2d/sound.mp3" preload="auto"></audio>
        </a-assets>
  
        <a-image src="./asset/2d/SanPioV.png" scale="1 5.2 1" rotation="-20 100 -20" position="0 0 -1" look-at="[gps-camera]" 
        gesture-handler class="clickable"
        gps-entity-place="latitude: 44.141820; longitude: 12.244194; " id="2dImage"/></a-image>
       
        
            <a-box material="color: yellow" gps-new-entity-place="latitude: 44.1387299; longitude: 12.244238;" rotation="-45 0 0" position="-0 0 -1"/>

            <!--<a-sound src="src: url(/asset/2d/sound.mp3)" gps-entity-place="latitude: 44.1387299; longitude: 12.244238; " autoplay="true"></a-sound>
            -->
            <a-entity id="river" geometry="primitive: plane" material="color: blue" gps-entity-place="latitude: 44.13872998373266; longitude: 12.244238611211696; "  sound="src: #river; autoplay: true"></a-entity>

         
            
            <a-camera gps-camera rotation-reader look-controls-enabled='false'  gps-projected-camera='gpsMinDistance: 5'
            ps-camera="simulateLatitude: 44.1387299; simulateLongitude: 12.244238;" 
            arjs-look-controls='smoothingFactor: 0.1' class="clickable" simulateLatitude> </a-camera>
        </a-scene> 
             
        <button onclick="history.back()" class="back btn ar2D">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-reply" viewBox="0 0 16 16">
                <path d="M5.921 11.9 1.353 8.62a.719.719 0 0 1 0-1.238L5.921 4.1A.716.716 0 0 1 7 4.719V6c1.5 0 6 0 7 8-2.5-4.5-7-4-7-4v1.281c0 .56-.606.898-1.079.62z"/>
          </svg>
            Back
        </button>

        <fieldset class='glass'>
            <legend>Interagisci con il reperto</legend>
                        
            <div>
              <img src='./asset/move.gif' width=45 >
              <p>Usa un dito per spostare</p>
            </div>

        </fieldset>

    </body>
</html>

<!doctype HTML>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <link rel="stylesheet" href="styles.css">
        <link rel="shortcut icon" href="#" />
    </head>

    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>

    <script src="https://raw.githack.com/fcor/arjs-gestures/master/dist/gestures.js"></script>
    <!--<script src="./js/gesture-detector.js"></script>
    <script src="./js/gesture-handler.js"></script>-->
    <script src="https://raw.githack.com/AR-js-org/AR.js/3.0.0/aframe/build/aframe-ar-nft.js"></script>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const img = urlParams.get('img');

        document.addEventListener("DOMContentLoaded", function(event) { 
            
            const m3D = document.getElementById("3Dmodel");
            m3D.removeAttribute("gltf-model");
            m3D.removeAttribute("position");
            switch(img){
                case '1':
                    m3D.setAttribute('gltf-model',"./asset/3d/portrait.glb");
                    m3D.object3D.scale.set(0.05, 0.05, 0.05);
                    m3D.object3D.position.set(0, -0.5, 0);
                    document.getElementById("textAR").setAttribute('value',"Mezzo busto");
                    break;
                case '2':
                    m3D.setAttribute('gltf-model',"./asset/3d/ship.glb");
                    m3D.object3D.scale.set(0.2, 0.2, 0.2);
                    m3D.object3D.position.set(0, -1, 0);
                    document.getElementById("textAR").setAttribute('value',"Modellino di imbarcazione");
                    break;
                case '3':
                    m3D.setAttribute('gltf-model',"./asset/3d/vase.glb");
                    m3D.object3D.scale.set(3,3,3);
                    m3D.object3D.position.set(0, -1, 0);
                    document.getElementById("textAR").setAttribute('value',"Vaso");
                    break;
            }
            console.log(m3D.getAttribute('scale'));
            
        });
    </script>

    <body>
        <h1>Inquadra il marker con la scritta Hiro</h1>
        <a-scene embedded arjs='debugUIEnabled: false;' vr-mode-ui="enabled: false"  gesture-detector id="scene">
            <a-marker preset="hiro" raycaster="objects: .clickable" emitevents="true" cursor="fuse: false; rayOrigin: mouse;">
                <a-entity gltf-model="" move position="0 0 0" rotation="-90 0 0" scale="0.1 0.1 0.1" class="clickable" gesture-handler id="3Dmodel"></a-entity>
                <a-text rotation="-90 0 0" position="-0.5 0 -1" width="1.8"  letter-spacing="4.8" line-height="50"  value="" negate="false"></a-text>
            </a-marker>

            <a-entity camera></a-entity>
        </a-scene>
         <!--<a-scene arjs='sourceType:webcam' >
            <a-marker smoothCount=0 smoothTolerance=0.0001>
                 <a-entity gltf-model="" position="0 -1 0" rotation="-45 0 0" scale="0.2 0.2 0.2""></a-entity>
                 <a-text id="textAR" position="0 1 0" rotation="-45 0 0" width="1.8"  letter-spacing="5" line-height="50" align="center"
                      value="" font="./asset/font/SpecialElite-Regular-msdf.json" negate="false"></a-text>
               <a-entity gltf-model="" rotation="-45 0 0" position="0 0 0" scale='0.1 0.1 0.1' class="clickable" id="3Dmodel" gesture-handler></a-entity>
                <a-text id="textAR" position="0 1 0" rotation="-45 0 0" width="1.8"  letter-spacing="4.5" line-height="50" align="center"
                     value="" font="./asset/font/SpecialElite-Regular-msdf.json" negate="false"></a-text>
            </a-marker>

        </a-scene>-->



        <!--<a-scene arjs='sourceType: webcam; debugUIEnabled: false;' vr-mode-ui="enabled: false" gesture-detector id="scene">
            <a-marker preset="hiro" raycaster="objects: .clickable" emitevents="true" cursor="fuse: false; rayOrigin: mouse;" id="markerA" 
            smoothCount=0 smoothTolerance=0.0001>
                 <a-entity gltf-model="" position="0 -1 0" rotation="-45 0 0" scale="0.2 0.2 0.2" class="clickable" gesture-handler id="3Dmodel"></a-entity>
                 <a-text id="textAR" position="0 1 0" rotation="-45 0 0" width="1.8"  letter-spacing="5" line-height="50" align="center"
                      value="" font="./asset/font/SpecialElite-Regular-msdf.json" negate="false"></a-text>
               <a-entity gltf-model="" rotation="-45 0 0" position="0 0 0" scale='0.1 0.1 0.1' class="clickable" id="3Dmodel" gesture-handler></a-entity>
                <a-text id="textAR" position="0 1 0" rotation="-45 0 0" width="1.8"  letter-spacing="4.5" line-height="50" align="center"
                     value="" font="./asset/font/SpecialElite-Regular-msdf.json" negate="false"></a-text>
            </a-marker>

            <a-entity camera></a-entity>
        </a-scene>-->
               
        <fieldset class='glass'>
            <legend>Interagisci con il reperto</legend>
            <div> <img src='./asset/move.gif' width=45 > <p>Usa un dito per ruotare</p> </div>
            <div> <img src='./asset/zoom.gif' width=50 > <p>Usa due dita per zoomare</p></div>
          </fieldset>

    </body>
</html>
